### テストモード  

チェックした場合はファイルの削除とコピーが行われません。同期タスクで同期した場合にコピーや削除されるファイルを確認するために使用してください。 コピーや削除されるファイルは履歴やメッセージで確認できます。テストモードでは自動同期タスクに設定できません。  

### 自動同期タスク  

タスクが選択されていない時に同期ボタンを押すと同期を開始するタスクになります。  

### タスク名  

同期タスクの名前です。名前は大文字と小文字の区別を行いません。  

### 同期方式  

ミラー、コピー、移動、アーカイブから方式を選択する。<span style="color: red; "><u>同期はマスターからターゲットの一方向で行います。</u></span>  

- ミラー  
マスター側のディレクトリーとファイルをターゲット側に差分コピー(***1**)し、コピー終了後にマスター側に存在しないターゲット側のファイルとディレクトリーを削除する。  
- 移動  
マスター側のディレクトリーとファイルをターゲット側に差分コピーし、ターゲット側にコピーしたマスター側のファイルを削除する。（ただし、マスターとターゲットに同名でファイルサイズと更新日時が同じファイルはコピーせずマスター側のファイルを削除）  
- コピー  
マスター側のディレクトリーに含まれるファイルをターゲット側に差分コピーする。  
- アーカイブ  
マスター側のディレクトリーに含まれる写真とビデオをアーカイブ実行日時より撮影日時が７日以前や30日以前などの条件でターゲットに移動する。（ただし、ターゲットにZIPは使用できません）  

***1**下記の３条件のうちいずれかが成立した場合に差分ファイルと判定し、コピーや移動を行います。ただし、同期タスクのオプションでファイルサイズと最終更新時間を無視することができます。  

- ファイルが存在しない  
- ファイルサイズが違う  
- 最終更新日時が3秒以上違う(秒数は同期タスクのオプションにより変更可能)  

### マスターとターゲットを入れ替える  

マスターフォルダーとターゲットフォルダーの内容を入れ替えます  

### マスターフォルダー  

同期元ディレクトリーを指定します。アイコンをタップするとフォルダー編集画面が表示されます  

### ターゲットフォルダー  

同期先ディレクトリーーを指定します。アイコンをタップすると同期先フォルダー編集画面が表示されます  

### ファイルを選択する  

チェックしないと全てのファイルを同期します。チェックすると同期するファイルを選択することができます。  

###ファイル名フィルター  

- オーディオファイルを同期する  
チェックすると下記の拡張子のファイルを同期します。  
aac, aif, aifc, aiff, flac, kar, m3u, m4a, mid, midi, mp2, mp3, mpga, ogg, ra, ram, wav  
- イメージファイルを同期する  
チェックすると下記の拡張子のファイルを同期します。  
bmp, cgm, djv, djvu, gif, ico, ief, jpe, jpeg, jpg, pbm, pgm, png,pnm, ppm, ras, rgb, svg, tif, tiff, wbmp, xbm, xpm, xwd  
- ビデオファイルを同期する  
チェックすると下記の拡張子のファイルを同期します。  
avi, m4u, mov, mp4, movie, mpe, mpeg, mpg, mxu, qt, wmv  
- ファイルフィルター  
上記以外で同期するファイルの名前や拡張子を選択できます  

###ファイルサイズフィルター  

ファイルの大きさにより同期するファイルを選択できます。  

- より小さい/より大きい  
任意のファイルサイズを指定できます。  

###ファイル更新日フィルター  
ファイルの最終更新日に基づきファイルを選択できます。  

- 1日以内は最終更新日が同期開始日と同期開始日の前日の2日間が選択されます。  
- 1日以前は最終更新日が同期開始日の前日以前のファイルが選択されます。  
- 同期開始日以降は最終更新日が同期開始日のファイルが選択されます。(同期が翌日に終了した場合は同期開始日以降となります)  

### 同期するサブディレクトリーを指定する  

チェックしないと全てのサブディレクトリーを同期します。チェックするとディレクトリーフィルターボタンが表示されます。  

### 充電中の時だけ同期を開始する  
充電中だけ同期を開始できます。充電していない時に同期を開始するとエラーとなり後続の同期タスクの開始を中止します。  

### マスターで指定されたディレクトリーの直下に存在するファイルを処理する  

チェックした場合はマスターフォルダーで指定されたディレクトリーに存在するファイルとサブディレクトリーおよびサブディレクトリーに含まれるファイルを処理します。チェックしていない場合はマスターフォルダーで指定されたディレクトリーに存在するサブディレクトリーおよびサブディレクトリーに含まれるファイルだけを処理します。  

### 上書コピーまたは削除の前に確認する  
チェックした場合はファイルの削除と上書きする前に確認ダイアログを表示します。  

### ワイヤレスAPオプション  
ネットワークの状態で同期を開始できるかどうかを設定できます。  

- オフでも実行  
ネットワークの状態に関係なく同期を開始できます  
- APに接続されている時  
アクセスポイントに接続していれば同期を開始できます  
- プライベートIPアドレス  
IPアドレスがプライベートアドレスの時に同期を開始できます  
- IPアドレスリスト  
同期を開始できるIPアドレスを指定できます。  
フィルターはワイルドカードが使用できます。 (例:192.168.100.\*, 192.168.\*)  

特定のWiFiに接続した時に同期するには以下の方法があります。詳細は[FAQ](https://sentaroh.github.io/Documents/SMBSync2/SMBSync2_FAQ_JA.htm)を参照ください。  

1. WiFiルーターでIPアドレスを192.168.0.0/24以外にしてIPアドレスリストに登録する  
1. Android側でIPアドレスを固定してIPアドレスリストに登録する  

### 指定されたIPアドレスで無い場合タスクをスキップし、次のタスクを開始する  

チェックすると条件から外れた場合はエラーとせず後続のタスクを開始します。  

### グローバルIPアドレスでの同期を許可する  

チェックするとプライベートアドレス以外での同期が実行できます。  

### 詳細なオプションを表示する  

チェックすると指定できるオプションが表示されます。  

### サブディレクトリーを処理する  

チェックすると同期フィルターで選択されたサブディレクトリーを同期する。<span style="color: red; "><u>チェックしないとサブディレクトリーは同期されません。</u></span>  

### 空のディレクトリーを処理する  

チェックすると空のディレクトリーを同期します。（ターゲットに空のディレクトリーを作成する）  

### 隠しディレクトリーを処理する  

チェックすると隠しディレクトリーを同期します。（Androidでは隠しディレクトリーの名前は「．」から始まりますが、WindowsやSambaではディレクトリーの名前ではなくディレクトリーのビットであらわされますので、同期により作成されたディレクトリーは隠しディレクトリーになりません）  

### 隠しファイルを処理する  

チェックすると隠しファイルを同期します。（Androidでは隠しファイルの名前は「．」から始まりますが、WindowsやSambaではファイルの名前ではなくディレクトリーのビットであらわされますので、同期により作成されたファイルは隠しファイルになりません）  

### ファイルを上書きする  
チェックするとファイルを上書きします。  

### 拡張されたディレクトリー選択/除外フィルターを使用する  

上位ディレクトリーが除外されている時に下位ディレクトリーを選択している場合は下位ディレクトリーを同期の対象にします。  

### ディレクトリーフィルターV2を使用  

チェックすると新しいフィルターが使用できます。<span style="color: red; "><u>以前のフィルターと挙動が違う場合がありますので十分なテストを行い使用してください。</u></span>  

### ミラーの時は削除を最初に行う  

チェックすると最初にマスターフォルダーに存在しないディレクトリーとファイルを削除し、その後にマスターフォルダーとファイルサイズや最終更新時間が違うファイルをコピーします。マスターフォルダーがSMBの場合はネットワーク経由でファイルのスキャンを行うため処理時間が長くなります。可能ならばSMBプロトコルは「SMBv2/3」をご使用ください。  

### フィルターにより除外されたディレクトリー/ファイルを削除する  

チェックすると<span style="color: red; "><u>フィルターで除外されたディレクトリーとファイルを削除します。</u></span>  

### ネットワークエラーが発生した場合にリトライする  
SMBサーバーのエラーに限り同期をリトライする。リトライは最大3回行う、それぞれのリトライはエラー発生から30秒経過後に行う。  

### SMBフォルダー書き込み時のIOバッファーを16KBに制限する  

PC/NASフォルダーへの書き込み時に“Access is denied”エラーが発生した時に試してみてください。チェックした場合はリモートファイル書き込み時のIOバッファーを16KBに制限します。ただし、パフォーマンスは低下します。  

### SMBフォルダーへのファイル書き込みで一時ファイルを使用せず直接書き込む  

チェックしないと宛先のSMBサーバーのファイルを直接書き換えますので、<span style="color: red; "><u>エラーやキャンセルにより更新が中断されるとファイルが壊れます。</u></span>  

### ターゲットファイルの最終更新時刻をマスターと同じにしない  

SmbFile.setLastModified()やFile.setLastModified()が失敗する場合に有効にしてください。これにより、ファイルの差分判定はファイルの存在の有無とファイルサイズで判定されます。  

### 強制的にSMBSync2で最終更新日時を取得  

毎回全てのファイルがコピーされる場合に試してみてください。Java File.setLastModified()を使用しないで、SMBSync2独自方式でローカルファイルの最終更新日時を保守する。  

### 差分判定にファイルサイズを使用する  

チェックした場合はファイルサイズが違う場合は差分ファイルとして判定する。  

### マスターのファイルサイズが大きい時だけ差分ファイルとして判定する  

チェックした場合はマスターファイルサイズが大きい時だけ同期の対象とする。  

### 差分ファイルの判定にファイルの最終更新時間を使用する  
チェックした場合はファイルの最終更新時刻が違う場合は差分ファイルとして判定する。  

### 許容するマスターとターゲットファイルの最終更新時刻の差(秒)  
1秒、3秒と10秒のうちから選択します。ファイルの最終更新時刻の差が選択された時間差内であれば変更なしとします  

### ターゲットファイルがマスターファイルより新しい時はターゲットファイルを上書きしない  
チェックするとファイルサイズおよび最終更新時刻が違っていてもマスターファイルがターゲットファイルよりも新しい時だけファイルを上書きします。  

### 夏時間と標準時の時間差を無視する  
チェックすると夏時間と標準時の時間差を無視します。  

### 夏時間と標準時の時間差(分)  
無視する時間差を指定します。  

### ディレクトリー名またはファイル名に使用できない文字が含まれているディレクトリーまたはファイルの処理をスキップする。 (", :, \, *, <, >, |)  

チェックすると使用できない文字が含まれているディレクトリー/ファイルを処理せず警告メッセージを表示し次のディレクトリー/ファイルを処理します。  

### ファイルサイズが0バイトのファイルを無視する  

チェックするとファイルサイズが0バイトのファイルを無視します。  

### ファイル名の長さが指定した値より長い場合はファイルを無視する  

出力ファイル名の最大長(バイト数)を指定します。ファイル名のバイト数が最大値を超えた場合はファイルを無視します。  

### ドキュメント  
[FAQ](https://sentaroh.github.io/Documents/SMBSync2/SMBSync2_FAQ_JA.htm)  
[マニュアル](https://sentaroh.github.io/Documents/SMBSync2/SMBSync2_Desc_JA.htm)   
